<app-page-container [title]="newsItem?.title || 'Haber Detayı'" [breadcrumbSteps]="breadcrumbSteps">
    <div class="container mx-auto px-4 py-8" *ngIf="newsItem; else notFound">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Main Content -->
            <div class="lg:w-3/4">
                <div class="bg-white rounded-xl shadow-md p-6 md:p-10 border border-gray-100">
                    <!-- Article Header -->
                    <div class="mb-8">
                        <span
                            class="inline-block bg-accent/10 text-accent font-semibold px-3 py-1 rounded-full text-sm mb-4">
                            Haberler
                        </span>
                        <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4 leading-tight">
                            {{ newsItem.title }}
                        </h1>
                        <div class="flex items-center text-gray-500 text-sm">
                            <i class="far fa-calendar-alt mr-2"></i>
                            <span>{{ newsItem.date }}</span>
                            <span class="mx-3">•</span>
                            <i class="far fa-eye mr-2"></i>
                            <span>Okunma Süresi: 3 dk</span>
                        </div>
                    </div>

                    <!-- Featured Image -->
                    <div class="rounded-xl overflow-hidden shadow-sm mb-10">
                        <img [src]="newsItem.image" [alt]="newsItem.title"
                            class="w-full h-[400px] object-cover hover:scale-105 transition-transform duration-700">
                    </div>

                    <!-- Content -->
                    <article class="prose prose-lg max-w-none text-gray-700 leading-relaxed">
                        <p class="text-xl font-medium text-gray-800 mb-8 border-l-4 border-primary pl-4 italic">
                            {{ newsItem.description }}
                        </p>

                        <!-- Dummy Content -->
                        <div class="space-y-6">
                            <p>
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor
                                incididunt ut
                                labore
                                et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                                laboris
                                nisi ut
                                aliquip ex ea commodo consequat.
                            </p>
                            <p>
                                Duis aute irure dolor in reprehenderit in voluptate velit esse
                                cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident,
                                sunt
                                in
                                culpa qui officia deserunt mollit anim id est laborum.
                            </p>
                            <blockquote class="bg-gray-50 p-6 rounded-lg border-l-4 border-accent my-8">
                                <p class="text-gray-700 italic font-medium mb-2">"Belediyecilik, gönül işidir. Hizmet
                                    aşkıyla
                                    çalışıyoruz."</p>
                                <footer class="text-sm text-gray-500">- Mustafa Cebeci</footer>
                            </blockquote>
                            <p>
                                Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque
                                laudantium,
                                totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto
                                beatae
                                vitae
                                dicta sunt explicabo.
                            </p>
                        </div>
                    </article>

                    <!-- Tags -->
                    <div class="mt-10 pt-6 border-t border-gray-100">
                        <div class="flex flex-wrap gap-2">
                            <span
                                class="px-3 py-1 bg-accent/10 text-accent rounded-full text-sm hover:bg-accent/20 cursor-pointer transition-colors">#Oğuzlar</span>
                            <span
                                class="px-3 py-1 bg-accent/10 text-accent rounded-full text-sm hover:bg-accent/20 cursor-pointer transition-colors">#Belediye</span>
                            <span
                                class="px-3 py-1 bg-accent/10 text-accent rounded-full text-sm hover:bg-accent/20 cursor-pointer transition-colors">#Hizmet</span>
                        </div>
                    </div>
                </div>

                <!-- Photo Gallery -->
                <div class="mt-8 bg-white rounded-xl shadow-md p-6 md:p-10 border border-gray-100"
                    *ngIf="newsItem.photos && newsItem.photos.length > 0">
                    <h3 class="text-xl font-bold text-gray-900 mb-6 border-l-4 border-accent pl-3">Fotoğraf Galerisi
                    </h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        <div *ngFor="let photo of newsItem.photos; let i = index"
                            class="relative group cursor-pointer overflow-hidden rounded-lg aspect-square"
                            (click)="openLightbox(i)">
                            <img [src]="photo"
                                class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                                alt="Galeri Fotoğrafı">
                            <div
                                class="absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300 flex items-center justify-center">
                                <i
                                    class="fas fa-search-plus text-white opacity-0 group-hover:opacity-100 transform scale-50 group-hover:scale-100 transition-all duration-300 text-2xl"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar / Share Section -->
            <div class="lg:w-1/4">
                <div class="sticky top-24 space-y-8">
                    <!-- News Stats -->
                    <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100">
                        <h3 class="text-lg font-bold text-gray-900 mb-4">Haber Detayları</h3>
                        <div class="space-y-4">
                            <div class="flex items-center text-gray-700">
                                <div
                                    class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary shadow-sm mr-3">
                                    <i class="far fa-calendar-alt"></i>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 font-medium">Yayın Tarihi</p>
                                    <p class="font-semibold">{{ newsItem.date }}</p>
                                </div>
                            </div>

                            <div class="flex items-center text-gray-700">
                                <div
                                    class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary shadow-sm mr-3">
                                    <i class="far fa-clock"></i>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 font-medium">Okunma Süresi</p>
                                    <p class="font-semibold">3 Dakika</p>
                                </div>
                            </div>

                            <div class="flex items-center text-gray-700">
                                <div
                                    class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary shadow-sm mr-3">
                                    <i class="far fa-eye"></i>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 font-medium">Görüntülenme</p>
                                    <p class="font-semibold">1.254 Kez</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Share Card -->
                    <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100">
                        <h3 class="text-lg font-bold text-gray-900 mb-4">Haberi Paylaş</h3>
                        <div class="flex flex-col gap-3">
                            <button
                                class="flex items-center justify-center gap-3 w-full bg-[#1877F2] text-white py-2.5 rounded-lg hover:bg-[#1877F2]/90 transition-colors font-medium">
                                <i class="fab fa-facebook-f"></i> Facebook
                            </button>
                            <button
                                class="flex items-center justify-center gap-3 w-full bg-[#1DA1F2] text-white py-2.5 rounded-lg hover:bg-[#1DA1F2]/90 transition-colors font-medium">
                                <i class="fab fa-twitter"></i> Twitter
                            </button>
                            <button
                                class="flex items-center justify-center gap-3 w-full bg-[#25D366] text-white py-2.5 rounded-lg hover:bg-[#25D366]/90 transition-colors font-medium">
                                <i class="fab fa-whatsapp"></i> WhatsApp
                            </button>
                            <button
                                class="flex items-center justify-center gap-3 w-full bg-[#0077B5] text-white py-2.5 rounded-lg hover:bg-[#0077B5]/90 transition-colors font-medium">
                                <i class="fab fa-linkedin-in"></i> LinkedIn
                            </button>
                            <button
                                class="flex items-center justify-center gap-3 w-full bg-gray-800 text-white py-2.5 rounded-lg hover:bg-gray-900 transition-colors font-medium">
                                <i class="fas fa-link"></i> Linki Kopyala
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <ng-template #notFound>
        <div class="text-center py-12">
            <h2 class="text-2xl font-bold text-gray-700">Haber bulunamadı.</h2>
            <a routerLink="/haberler" class="text-primary hover:underline mt-4 inline-block">Haberlere Dön</a>
        </div>
    </ng-template>
</app-page-container>

<!-- Lightbox Modal -->
<div class="fixed inset-0 z-[1050] bg-black/90 flex items-center justify-center backdrop-blur-sm transition-opacity duration-300"
    *ngIf="isLightboxOpen" (click)="closeLightbox()">

    <!-- Close Button -->
    <button class="absolute top-4 right-4 text-white hover:text-gray-300 z-50 p-2" (click)="closeLightbox()">
        <i class="fas fa-times text-3xl"></i>
    </button>

    <!-- Previous Button -->
    <button
        class="absolute left-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 z-50 p-4 bg-black/20 hover:bg-black/40 rounded-full transition-colors"
        (click)="prevImage($event)" *ngIf="newsItem?.photos && newsItem?.photos?.length! > 1">
        <i class="fas fa-chevron-left text-2xl"></i>
    </button>

    <!-- Image Container -->
    <div class="relative max-w-7xl max-h-[90vh] p-4" (click)="$event.stopPropagation()">
        <img [src]="currentLightboxImage" class="max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl"
            alt="Büyük Önizleme">
        <div class="text-center text-white/80 mt-4 font-medium">
            {{ currentLightboxImageIndex + 1 }} / {{ newsItem?.photos?.length }}
        </div>
    </div>

    <!-- Next Button -->
    <button
        class="absolute right-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 z-50 p-4 bg-black/20 hover:bg-black/40 rounded-full transition-colors"
        (click)="nextImage($event)" *ngIf="newsItem?.photos && newsItem?.photos?.length! > 1">
        <i class="fas fa-chevron-right text-2xl"></i>
    </button>
</div>
<!-- Loading State -->
<div *ngIf="loading" class="flex justify-center items-center h-screen">
    <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary-600"></div>
</div>

<!-- Content State (Found) -->
<app-page-container *ngIf="!loading && pageContent" [title]="pageTitle" [breadcrumbSteps]="breadcrumbSteps">
    <div class="bg-white rounded-lg shadow-xl overflow-hidden min-h-[400px]">
        <div class="p-6 space-y-6 text-gray-700 leading-relaxed animate-fade-in">
            <!-- Image Section -->
            <div *ngIf="pageContent.imageUrl">
                <img [src]="pageContent.imageUrl | imageUrl" [alt]="pageContent.title"
                    class="w-full h-96 object-cover rounded-lg shadow-md mb-6">
            </div>

            <!-- Title -->
            <h2 class="text-2xl font-bold text-primary mb-4 hidden md:block">{{ pageContent.title }}</h2>
            <p *ngIf="pageContent.subtitle"
                class="text-lg text-gray-600 mb-6 italic border-l-4 border-primary-500 pl-4 py-2 bg-gray-50 rounded-r-lg">
                {{ pageContent.subtitle }}
            </p>

            <!-- Content Body -->
            <div class="space-y-4">
                <div *ngFor="let paragraph of pageContent.paragraphs" [innerHTML]="paragraph"></div>
            </div>

            <!-- Contact Details (if any) -->
            <div *ngIf="pageContent.contactDetails && pageContent.contactDetails.length > 0"
                class="mt-10 border-t pt-8 border-gray-200 dark:border-gray-700">
                <h3 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white">İletişim Bilgileri</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div *ngFor="let contact of pageContent.contactDetails"
                        class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border border-gray-100 dark:border-gray-600">
                        <span class="block text-sm font-semibold text-primary-600 dark:text-primary-400 mb-1">{{
                            contact.label }}</span>
                        <span class="block text-lg text-gray-800 dark:text-gray-200 font-medium">{{
                            contact.value }}</span>
                    </div>
                </div>
            </div>

            <!-- Map Embed (if any) -->
            <div *ngIf="pageContent.mapEmbedUrl && getSafeMapUrl(pageContent.mapEmbedUrl)"
                class="mt-10 rounded-lg overflow-hidden shadow-lg h-[400px]">
                <iframe [src]="getSafeMapUrl(pageContent.mapEmbedUrl)" width="100%" height="100%" style="border:0;"
                    allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </div>
    </div>
</app-page-container>

<!-- Not Found State -->
<div *ngIf="!loading && !pageContent"
    class="flex flex-col items-center justify-center py-20 px-4 text-center min-h-[50vh]">
    <i class="pi pi-file-excel text-8xl text-gray-300 mb-6"></i>
    <h2 class="text-4xl font-bold text-primary mb-4">Sayfa Bulunamadı</h2>
    <p class="text-lg text-gray-600 font-medium mb-8 max-w-md mx-auto">
        Aradığınız sayfa mevcut değil veya kaldırılmış olabilir.
    </p>
    <a routerLink="/"
        class="px-8 py-3 bg-primary text-white font-bold rounded-lg hover:bg-accent transition-colors shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
        Ana Sayfaya Dön
    </a>
</div>